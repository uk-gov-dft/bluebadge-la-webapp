<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>

    /* ------------------------------------------------------------------------------

    * Input Field

    @label - String: Label for form input field
    @name - String: Name for the form input field. This same name is used
                    for id and attaching label to the input field.
    @hint - String: Adds hint for the input field underneath the label.
    @type - String: change the type of input field. Default is set to text

    -------------------------------------------------------------------------------- */

    <div th:fragment="govuk-input(label, name, hint, type)"
         th:class="${#fields.hasErrors(name)} ? 'govuk-form-group govuk-form-group--error' : 'govuk-form-group'">

        <label
            class="govuk-label"
            th:attr="for=${name}"
            th:utext="${label}"
            th:data-uipath="${name} + '.label'" />

        <span class="govuk-hint"
              th:if="${hint}"
              th:utext="${hint}"
              th:id="${#fields.hasErrors(name)} ? ${name} + '-hint ' + ${name} + '-error' : ${name} + '-hint'"
              th:data-uipath="${name} + '.label_hint'" />

        <span class="govuk-error-message"
              th:data-uipath="${name} + '.error'"
              th:id="${name} + '-hint'"
              th:if="${#fields.hasErrors(name)}"
              th:errors="*{__${name}__}" />

        <input th:class="${#fields.hasErrors(name)} ? 'govuk-input govuk-input--error' : 'govuk-input'"
               th:data-uipath="${name} + '.field'"
               th:id="${name}"
               th:name="${name}"
               th:type="${type}"
               th:field="*{__${name}__}"
               th:aria-describedby="${hint} ? (${#fields.hasErrors(name)} ? ${name} + '-hint ' + ${name} + '-error' : ${name} + '-hint') : null " />

    </div><!-- govuk-o-form-group -->

    /* ------------------------------------------------------------------------------

    * Date Field

    -------------------------------------------------------------------------------- */

    <div class="govuk-form-group" th:fragment="govuk-date(label, hint, day, month, year)"
        th:class="${#fields.hasErrors(day)} OR ${#fields.hasErrors(month)} OR ${#fields.hasErrors(year)} ? 'govuk-form-group govuk-form-group--error' : 'govuk-form-group'">
        <fieldset class="govuk-fieldset" aria-describedby="dob-hint" role="group">

            <legend class="govuk-fieldset__legend" th:if="${label}">
                <h2 th:utext="${label}" data-uipath="dob.legend" class="govuk-heading-s" />
            </legend>
            <span id="dob-hint" class="govuk-hint" th:if="${hint}" th:utext="${hint}" />

            <span class="govuk-error-message"
              th:data-uipath="'dob' + ${day} + '.error'"
              th:if="${#fields.hasErrors(day)}"
              th:errors="*{__${day}__}" />

            <span class="govuk-error-message"
              th:data-uipath="'dob' + ${month} + '.error'"
              th:if="${#fields.hasErrors(month)}"
              th:errors="*{__${month}__}" />

            <span class="govuk-error-message"
              th:data-uipath="'dob' + ${year} + '.error'"
              th:if="${#fields.hasErrors(year)}"
              th:errors="*{__${year}__}" />

            <div class="govuk-date-input" id="dob">

                <div class="govuk-date-input__item govuk-date-input__item--day" th:if="${day}">
                    <div class="govuk-form-group">
                        <label class="govuk-label govuk-date-input__label" data-uipath="dob.day.label" th:attr="for=${day}">Day</label>
                        <input class="govuk-input govuk-date-input__input" data-uipath="dob.day.field" th:field="*{__${day}__}" type="text" pattern="[0-9]*">
                    </div>
                </div>

                <div class="govuk-date-input__item govuk-date-input__item--month" th:if="${month}">
                    <div class="govuk-form-group">
                        <label class="govuk-label govuk-date-input__label" data-uipath="dob.month.label" th:attr="for=${month}">Month</label>
                        <input class="govuk-input govuk-date-input__input" data-uipath="dob.month.field"  th:field="*{__${month}__}" type="text" pattern="[0-9]*">
                    </div>
                </div>

                <div class="govuk-date-input__item govuk-date-input__item--year" th:if="${year}">
                    <div class="govuk-form-group">
                        <label class="govuk-label govuk-date-input__label" data-uipath="dob.year.label" th:attr="for=${year}">Year</label>
                        <input class="govuk-input govuk-date-input__input" data-uipath="dob.year.label" th:field="*{__${year}__}" type="text" pattern="[0-9]*">
                    </div>
                </div>

            </div>
        </fieldset>
    </div>

    <div class="govuk-form-group" th:fragment="govuk-date-2(label, hint, day, month, year, date)">
        <fieldset class="govuk-fieldset" aria-describedby="dob-hint" role="group">

            <legend class="govuk-fieldset__legend" th:if="${label}">
                <h3 th:utext="${label}" class="govuk-heading-s" />
            </legend>
            <span id="dob-hint" class="govuk-hint" th:if="${hint}" th:utext="${hint}" />

            <div class="govuk-date-input" id="dob">

                        <span class="govuk-error-message"
                              th:data-uipath="*{__${date}__} + '.error'"
                              th:id="*{__${date}__} + '-hint'"
                              th:if="${#fields.hasErrors(date)}"
                              th:errors="*{__${date}__}" />

                <input th:field="*{__${date}__}" type="hidden">


                <div class="govuk-date-input__item govuk-date-input__item--day" th:if="${day}">
                    <div class="govuk-form-group">
                        <label class="govuk-label govuk-date-input__label" th:attr="for=${day}">Day</label>
                        <input class="govuk-input govuk-date-input__input" th:field="*{__${day}__}" type="number" pattern="[0-9]*">
                    </div>
                </div>

                <div class="govuk-date-input__item govuk-date-input__item--month" th:if="${month}">
                    <div class="govuk-form-group">
                        <label class="govuk-label govuk-date-input__label" th:attr="for=${month}">Month</label>
                        <input class="govuk-input govuk-date-input__input"  th:field="*{__${month}__}" type="number" pattern="[0-9]*">
                    </div>
                </div>

                <div class="govuk-date-input__item govuk-date-input__item--year" th:if="${year}">
                    <div class="govuk-form-group">
                        <label class="govuk-label govuk-date-input__label" th:attr="for=${year}">Year</label>
                        <input class="govuk-input govuk-date-input__input" th:field="*{__${year}__}" type="number" pattern="[0-9]*">
                    </div>
                </div>

            </div>
        </fieldset>
    </div>

</body>
</html>
