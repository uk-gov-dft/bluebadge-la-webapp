<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org">

<body>

<!--
     Displays an error. Used when the error is not in the form itself (neither field related or global). I.e. when you want
     to display custom errors not related to the form.

     shouldShowError: Boolean to control if the error should be displayed or not
     titleErrorMessage: The error has two parts the title and the description, this is the title
     descriptionErrorMesssage: The error has two parts the title and the description, this is the description
-->
<div th:fragment="general-form-error(shouldShow, title, description)">
    <div class="govuk-c-error-summary" aria-labelledby="error-summary-title" role="alert" tabindex="-1" th:if="${shouldShow}">
        <h2 class="govuk-c-error-summary__title" id="error-summary-title" th:text="${title}"></h2>
        <div class="govuk-c-error-summary__body">
            <p th:utext="${description}"></p>
        </div>
    </div>
</div>

<!--
    Generates a div with all the errors of a form that can be retrieved via "fields" which represents BindingResult in Spring MVC.

    fields: It is the the binding result that allows access to the errors in the form. This is the BindingResult class in Spring MVC.
-->
<div th:fragment="form-field-errors(fields)">
    <div class="govuk-c-error-summary" aria-labelledby="error-summary-title" role="alert" tabindex="-1"
         th:if="${#fields.hasErrors('formRequest.*')}">
        <h2 class="govuk-c-error-summary__title" id="error-summary-title">Fix the following errors</h2>

        <div class="govuk-c-error-summary__body">

            <ul th:if="${fields.hasErrors('formRequest.*')}">
                <li th:each="err : ${fields.detailedErrors('formRequest.*')}" th:if="${err.isGlobal()}"><span
                        th:utext="${err.message}">Input is incorrect</span></li>
                <li th:each="err : ${fields.detailedErrors('formRequest.*')}" th:if="${!err.isGlobal()}"><a href="#"
                                                                                                            th:href="'#' + ${err.fieldName}"><span
                        th:text="${err.message}">Input is incorrect</span></a></li>
            </ul>
        </div>
    </div>
</div>

<!--
    Generates an input html field with error handling

    fields: It is the the binding result that allows access to the errors in the form. This is the BindingResult class in Spring MVC.
    fieldId: field id as it appears in the id attribute of an html tag.
    label: text of the label associated to the field
    type: type of html input, i.e.: text, email, password
-->
<div th:fragment="form-field-input(fields, fieldId, label, type)">
    <div class="govuk-o-form-group"
         th:class="${#fields.hasErrors(fieldId)}? govuk-o-form-group--error : govuk-o-form-group">
        <a name="aname" th:attr="name=${fieldId}"/>

        <label class="govuk-c-label dft-c-label" for="field" th:attr="for=${fieldId}" th:text="${label}"></label>

        <p th:if="${#fields.hasErrors(fieldId)}" th:errors="*{__${fieldId}__}" class="govuk-c-error-message"></p>

        <input class="govuk-c-input" id="field" name="field" type="text" th:attr="id=${fieldId},name=${fieldId},type=${fieldId}"
               th:field="*{__${fieldId}__}">
    </div>
</div>

</body>

</html>

